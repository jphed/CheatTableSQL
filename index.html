<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cheat Table SQL</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <input type="text" id="searchInput" class="search-input" placeholder="Search Question..." onkeyup="filterQuestions()">
        <table>
            <thead>
                <tr>
                    <th>BLOQUE #3 CRUD2, JOINS, SUBQ1 </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        1. Agregar las categorias NOVELA y DRAMA
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                <tr class="answer">
                    <td>
                        <pre>INSERT INTO categorias (categoria) VALUES ("NOVELA");<br>INSERT INTO categorias (categoria) VALUES ("DRAMA");<br>SELECT categoria FROM categorias ORDER BY categoria ASC;</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                <tr>
                    <td>
                        2. Agregar al autor PEDRO
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                <tr class="answer">
                    <td>
                        <pre>INSERT INTO autors (nombre, paterno, correo, fnac, sexo, comision)<br>VALUES ("PEDRO", "SOLA", "pedrito@gmail.com", "1950-12-30", "H", NULL);<br><br>SELECT nombre, paterno, correo, fnac, sexo, comision<br>FROM autors<br>ORDER BY nombre;</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>

                <tr>
                    <td>
                        3. Seleccionar el autor más viejo (Usar subquerys)
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>

                <tr class="answer">
                    <td>
                        <pre>SELECT * FROM autors WHERE fnac = (SELECT MIN(fnac) AS fnac FROM autors);</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        Seleccionar los autores que escribieron el libro de JAVA (Usar JOIN)
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                
                <tr class="answer">
                    <td>
                        <pre>SELECT autors.id, autors.nombre, autors.paterno<br>FROM autors<br>INNER JOIN autor_libro ON autors.id = autor_libro.idautor<br>WHERE autor_libro.idlibro = 6;</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        Seleccionar los libros de PROGRAMACION con un precio menor a $300
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                
                <tr class="answer">
                    <td>
                        <pre>SELECT libros.id, libros.titulo, categorias.categoria, libros.precio<br>FROM libros<br>INNER JOIN categorias ON libros.idcategoria = categorias.id<br>WHERE libros.precio < 300 AND libros.idcategoria = 2;</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        Seleccionar los libros
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                
                <tr class="answer">
                    <td>
                        <pre>SELECT libros.id, libros.titulo, resumens.resumen<br>FROM libros<br>INNER JOIN resumens ON libros.id = resumens.idlibro;</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        Seleccionar los libros
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                
                <tr class="answer">
                    <td>
                        <pre>SELECT libros.id, libros.titulo, categorias.categoria<br>FROM libros<br>INNER JOIN categorias ON libros.idcategoria = categorias.id<br>WHERE libros.idcategoria = 1;</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        Seleccionar los autores que escribieron AVENTURAS EN LA SELVA (Usar JOIN)
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                
                <tr class="answer">
                    <td>
                        <pre>SELECT autors.id, autors.nombre, autors.paterno<br>FROM autors<br>INNER JOIN autor_libro ON autors.id = autor_libro.idautor<br>WHERE autor_libro.idlibro = 2;</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        Seleccionar los libros de la editorial PORRUA que no son de HISTORIA
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                
                <tr class="answer">
                    <td>
                        <pre>SELECT libros.id, libros.titulo, editorials.editorial, libros.idcategoria<br>FROM libros<br>INNER JOIN editorials ON libros.ideditorial = editorials.id<br>WHERE editorials.editorial IN ("PORRUA") AND libros.idcategoria NOT IN (1);</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        Seleccionar los libros
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                
                <tr class="answer">
                    <td>
                        <pre>SELECT libros.id, libros.titulo, editorials.editorial<br>FROM libros<br>INNER JOIN editorials ON libros.ideditorial = editorials.id;</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        Seleccionar los autores que escribieron HISTORIA CONTEMPORANEA (Usar JOIN)
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                
                <tr class="answer">
                    <td>
                        <pre>SELECT autors.id, autors.nombre, autors.paterno<br>FROM autors<br>INNER JOIN autor_libro ON autors.id = autor_libro.idautor<br>INNER JOIN libros ON libros.id = autor_libro.idlibro<br>WHERE libros.titulo = 'Historia Contemporánea';</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        Incrementar en 2 centavos la comisión de los autores
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                
                <tr class="answer">
                    <td>
                        <pre>UPDATE autors<br>SET comision = comision + 0.02;<br>SELECT * FROM autors;</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        Seleccionar los libros de editorial SIGLO XXI y PLANETA
                        <button class="deploy-btn" onclick="toggleAnswer(this)">Show Answer</button>
                    </td>
                </tr>
                
                <tr class="answer">
                    <td>
                        <pre>SELECT libros.id, libros.titulo, editorials.editorial<br>FROM libros<br>INNER JOIN editorials ON libros.ideditorial = editorials.id<br>WHERE libros.ideditorial IN (2,3)<br>ORDER BY editorials.editorial, libros.titulo;</pre>
                        <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                    </td>
                </tr>
                
                <!-- Add more questions and answers as needed -->
            </tbody>
        </table>

        <!-- Bookmarklet Section -->
        <div style="margin-top: 20px;">
            <h2>Bookmarklet Generator</h2>
            <label for="javascriptCode">JavaScript Code:</label><br><br>
            <textarea id="javascriptCode" rows="4" cols="50">javascript:(function(){const textArea=document.querySelector('textarea[name="respuesta"]');if(textArea){textArea.onselectstart=null;textArea.onpaste=null;textArea.oncopy=null;textArea.oncut=null;textArea.ondrag=null;textArea.ondrop=null;alert("Restricciones de copiar y pegar eliminadas!");}else{alert("Textarea con name='respuesta' no encontrado.");}})();
            </textarea><br><br>
            <button type="button" onclick="generateBookmarklet()">Generate Bookmarklet</button>
        </div>
        
        <h3>Drag this link to the bookmarks bar or right click and add:</h3>
        <a id="bookmarkletLink" href="#" style="display:none">
            <button>Arrastra este enlace a la barra de marcadores</button>
        </a>

        <div style="text-align: center; margin: 20px 0; padding: 50px;">
            <h2>Tutorial para principiantes</h2>
            <iframe width="640" height="360" src="https://www.youtube.com/embed/hB7CDrVnNCs" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>
    <div class="footer">
        &copy; 2023 <a href="https://github.com/jphed" target="_blank">jphed</a>. All rights reserved.
    </div>
    <script>
        function toggleAnswer(element) {
            const nextElement = element.closest('tr').nextElementSibling;
            if (nextElement && nextElement.classList.contains('answer')) {
                nextElement.style.display = nextElement.style.display === 'table-row' ? 'none' : 'table-row';
            }
        }

        function copyToClipboard(button) {
            const text = button.previousElementSibling.textContent;
            navigator.clipboard.writeText(text).then(() => {
                button.style.backgroundColor = '#28a745';
                setTimeout(() => {
                    button.style.backgroundColor = '';
                }, 500);
            }).catch(err => {
                console.error('Failed to copy text: ', err);
            });
        }

        function filterQuestions() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            const rows = document.querySelectorAll('tbody tr');

            rows.forEach(row => {
                const question = row.querySelector('td').textContent.toLowerCase();
                if (question.includes(filter)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        function generateBookmarklet() {
            const javascriptCode = document.getElementById('javascriptCode').value;
            const bookmarkletCode = 'javascript:' + encodeURIComponent(javascriptCode);
            const bookmarkletLink = document.getElementById('bookmarkletLink');
            
            bookmarkletLink.href = bookmarkletCode;
            bookmarkletLink.style.display = 'inline-block'; // Mostrar el enlace
        }
    </script>
</body>
</html>